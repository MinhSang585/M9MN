<?phpclass User_model extends CI_Model {	public function check_username_exits($username = NULL)	{		$result = FALSE;				$query = $this				->db				->select('user_id')				->where('username', $username)				->limit(1)				->get('users');						if($query->num_rows() > 0) 		{			$result = TRUE;		}		$query->free_result();				return $result;	}		public function get_user_data($username = NULL)	{			$result = NULL;				$query = $this				->db				->select('user_id, username, points, upline_ids')				->where('username', $username)				->limit(1)				->get('users');				if($query->num_rows() > 0)		{			$result = $query->row_array();  		}				$query->free_result();				return $result;	}		public function point_transfer($arr = NULL, $points = NULL)	{			$DBdata = array(			'user_id' => $arr['user_id'],			'username' => $arr['username'],			'points' => $points,			'updated_by' => $arr['username'],			'updated_date' => time()		);				$table = $this->db->dbprefix . 'users';		$this->db->query("UPDATE {$table} SET points = (points + ?), updated_by = ?, updated_date = ? WHERE user_id = ? LIMIT 1", array($DBdata['points'], $DBdata['updated_by'], $DBdata['updated_date'], $DBdata['user_id']));				return $DBdata;	}		public function insert_log($type = NULL, $device = NULL, $ndata = NULL, $odata = NULL)	{		$DBdata = array(			'user_id' => $ndata['user_id'],			'log_type' => $type,			'ip_address' => $this->input->ip_address(),			'log_date' => time(),			'old_data' => (($odata) ? json_encode($odata) : ''),			'new_data' => (($ndata) ? json_encode($ndata) : '')		);				if( ! empty($device))		{			$DBdata['user_agent'] = $this->agent->mobile() . ' ' . $this->agent->browser() . ' ' . $this->agent->version();			$DBdata['platform'] = $device;		}		else if($this->agent->is_mobile()) 		{			$DBdata['user_agent'] = $this->agent->mobile() . ' ' . $this->agent->browser() . ' ' . $this->agent->version();			$DBdata['platform'] = PLATFORM_MOBILE_WEB;		}		else 		{			$DBdata['user_agent'] = $this->agent->browser() . ' ' . $this->agent->version();			$DBdata['platform'] = PLATFORM_WEB;		}				$this->db->insert('user_logs', $DBdata);	}}